あなたは，プロのゲームクリエイターです
セキュリティ初学者を対象としてセキュリティの要素に触れさせることにより，セキュリティに興味を持ってもらうためのSlay the Spireに似たカードゲームを作成します

以下の仕様書に従って完璧に動作するゲームを作成してください
# 仕様書

## 背景
* プレイヤは中小企業の発足したばかりのCSIRTに新しく着任した新人である
* 敵からの攻撃や様々なセキュリティのイベントをこなして一定期間を乗り切ることを目標とするゲームである
** 所属する企業は，金銭と労働力と時間の3つのリソースを持っており，それらを駆使することで様々なセキュリティ施策を実施することができる
** しかし，カンターハッキングはご法度であるため，敵に対してこちらが能動的に出来るのは，予防的なセキュリティ対策やバックアップなどの事前準備である
** それにより，防御力を高めたり，敵の攻撃力を削ぐことができる
** そして，実際に攻撃を食らうと資産（体力）が減少する
** 事後対応によって，資産をある程度回復したりすることもできる
** 一定ターンを耐えきると，攻撃者は今回の攻撃では何も得られなかったと諦めて帰るだろう


## 開発環境
* Phaser.js


## 使用言語
* HTML
* Javascript
* CSS


## 構成シーン

### オープニングシーン
* ゲーム開始ボタンが配置してある

### マップシーン
* 計10ステージを自動生成．内訳は以下のようにして，次のステージ選択には，自動生成された3択から選択できるようにする
** 10ステージ目：ボスステージ
** 6～9ステージ目：エリート敵，休憩，宝箱，ショップ，イベントからランダムに生成
** 2～5ステージ目：敵，休憩，宝箱，ショップ，イベントからランダムに生成
** 1ステージ目：敵
* 自動生成された10ステージを全て確認できる．入りきらない場合はページ形式にする
** 自分が選択したステージと選択していないステージは分かりやすいように色分けを行う
* ステージが選択されたとき，それぞれ次のシーンに遷移する
** 敵：バトルシーン
** エリート敵：バトルシーン
** ボス：バトルシーン
** 休憩：休憩シーン
** 宝箱：宝箱シーン
** ショップ：ショップシーン
** イベント：イベントシーン

### バトルシーン
* この画面では以下の情報が表示されている

** プレイヤの情報
*** 防御力
*** 体力
*** エナジー：3種類（金銭，労働力，時間）
*** 手札：5枚（コスト，効果，防御力）
*** 状態：状態異常を表示する

** 敵の情報
*** 名前
*** 防御力
*** 体力
*** 次の行動予定
*** 状態：状態異常を表示する

** その他ユーティリティ
*** ターンエンドボタン
*** 山札
*** 捨て札


* 以下のステップに伴い，バトルを進行する

** バトルの開始
*** デッキを山札にする
*** 捨て札を全てなくす
*** プレイヤのターンを開始する

** プレイヤのターン
*** コストを最大まで回復する
*** プレイヤの防御力を0にする
*** 山札から5枚をランダムに手札にする（ドローする）
*** プレイヤが選択したカードを使用する
**** カードのコスト分のコストをエナジーから減らし，カードの効果を実行する
***** 例．プレイヤの防御力を高める，敵の体力を減らす，ドローする，バフ/デバフを与える
***** 尚，敵の体力を減らす場合，敵が防御力を持っている場合，自身のダメージが敵の防御力を下回る場合，プレイヤは体力を減らされず，自身のダメージが敵の防御力を上回る場合，超過分だけ敵の体力を減らす
**** 尚，必要なコストを支払うことが出来ないカードは使用することが出来ない
**** 一度選択したカードは，そのターン中使えなくなる
*** ターンエンドボタンを押すと手札を全て捨て札に送り，敵のターンになる

** 敵のターン
*** 敵の防御力を0にする
*** 敵の行動予定に表示してある行動を実行する
**** 例．プレイヤの体力を減らす，状態異常を与える
**** 尚，プレイヤの体力を減らす際，プレイヤが防御力を持っている場合，敵のダメージが防御力を下回る場合，プレイヤは体力を減らされず，敵のダメージが防御力を上回る場合，超過分プレイヤの体力を減らす 
*** 敵は，継続ダメージを受ける：時間を稼ぐだけでも敵は諦める
*** 敵の次の行動予定を表示する
*** プレイヤのターンになる

* 上記ステップは，プレイヤか敵の体力が0になるまで実行され，それぞれの場合において，次の処理を実行する
** プレイヤの体力が0になる
*** ゲームオーバーシーンに遷移する
** 敵の体力が0になる
*** 敵の種類が「敵，エリート敵」の場合，ゴールドを獲得し，報酬シーンに遷移する
*** 敵の種類が「ボス」の場合，ゲームオーバーシーンに遷移する

* 尚，上記ステップや処理は基本的処理であり，レリックや状態異常によって例外的に変化することがある．
** 例えば，脆弱性という状態異常があるとき，受けるダメージが2倍になるなどの処理を略記している

### 報酬シーン
* 敵の種類が(敵，エリート敵)の場合，以下を表示する
** ランダムに選択された3枚のカード
** スキップボタン
*** 3枚のカードを提示し，プレイヤは選択したカードをデッキに追加するか，不要な場合はスキップを選択できる
* 次に，以下を表示する
** ランダムに選択された未所持のレリックを3つ
** スキップボタンを表示する
***  3つのレリックからプレイヤは選択したレリックを取得するか，スキップをする
* その後，マップシーンに遷移する


### 宝箱シーン
* プレイヤはゴールドを獲得する
* 以下を表示する
** ランダムに選択された未所持のレリック3つ
*** 取得するレリックを選択する
** スキップボタンを提示
*** レリックを取得せず，スキップする
* 選択/スキップ後，マップシーンに遷移する


### 休憩シーン
* 以下を表示し，プレイヤは二つのうちから一つを選択できる
** 休憩ボタン
*** プレイヤの体力を回復する
** 強化ボタン
*** デッキの中から1枚カードを強化する
** スキップボタン
*** 休憩も強化もせずに次に進む
* 休憩/強化/スキップ後，マップシーンに遷移する


### ショップシーン
* プレイヤはゴールドを消費して，任意の商品を取得できる．商品は以下の選択肢である
** ランダムなカード5種類
** ランダムな未所持レリック3種類
** カードを削除する：1回のみ
*** ゴールドが不足しているとき，商品を購入することは出来ない
* 「店を出る」ボタン
** プレイヤは任意のタイミングで「店を出る」ボタンを押すことが出来，これを押すとマップシーンに遷移する


### イベントシーン
* 用意してあるイベントからランダムに一個選択され，それが実行される
** イベントによっては選択肢が存在し，選択に従った処理が実施される
** 一連のイベントが終了したら，マップシーンに遷移する


### ゲームオーバーシーン
* リザルトを表示する
** プレイヤのデッキ
** プレイヤのレリック
** プレイ時間
** 「次へ」ボタン
* 「次へ」ボタンが押されるとオープニングシーンに戻る



## オブジェクト
### カード
* 基本的には様々な防御技術である
** 持ってる情報は以下である
*** コスト3種類：金銭，労働力，時間
*** 効果
**** 防御力や攻撃力，回復量やバフ/デバフなど
*** シナジー：何を対象とするセキュリティか
**** 例．ネットワーク
* 防御技術の種類ごとにシナジーがあるように設計する
** 設計意図とシナジーが分かるように，種類をメタデータとして持っておく
* 敵の標的に対して特に有効である対策の組み合わせの場合は，効果が上昇するようになっている
 
### 敵
* コンセプトを持った敵であり，そのコンセプトを表すような名前を持っている
** それぞれの行動もコンセプトに基づいた設計になっている
*** 例.脆弱性，マルウェア，SE攻撃
*** また，MITRE ATT&CKにある攻撃のコンセプトを持っている
* 敵,エリート敵,ボスでサイバーキルチェーンを分割している
** 偵察，武器化，配送，悪用，インストール，遠隔制御，目的の実行
* これらの仕様を基にテンプレートを作成し，敵，エリート敵，ボスのステージに入った際に，テンプレートからランダムに一つ選択し，戦闘を開始する

### レリック
* 常時発動するギミックであり，イベントや戦闘によって取得できる
** 特定の攻撃への耐性や経験値や企業が大きくなることでのエナジーの最大値の増加をはじめとする
** また，特定のシナジーに対して，防御力を2倍にするなどの効果を持っていることもある
* こういったテンプレートを作成し，レリック選択時に未所持の物からランダムに選択して提示する

### イベント
* 様々なイベント（セキュリティ関連多めだが，必ずしも関連しなくてはならないわけではない．社会や企業に関すること）
** 例を以下に挙げる
*** 企業の衰勢により，エナジー量の増減
*** 投資
*** 競合企業からの攻撃により，戦闘突入
*** 内部不正による被害
*** セキュリティ関連法律施工
*** ポリシー刷新
*** ゼロデイ攻撃の発見